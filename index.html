<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÁôºÁ≤íÂ≠êË®àÂàÜÂô®</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <style>
        :root { --bg: #f8f9fa; --card: #ffffff; --primary: #34495e; --accent: #f39c12; --valid: #2ecc71; --invalid: #e74c3c; --zebra: #000000; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; padding: 15px; display: flex; flex-direction: column; align-items: center; }
        .header { width: 100%; max-width: 500px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; margin-bottom: 15px; }
        .header input { padding: 10px 5px; border: 1px solid #ddd; border-radius: 8px; text-align: center; font-size: 0.9rem; background: white; font-weight: bold; }
        .table-container { width: 100%; overflow-x: auto; background: var(--card); border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        table { width: 100%; border-collapse: collapse; min-width: 480px; }
        th { background: var(--primary); color: white; padding: 12px 5px; font-size: 0.85rem; }
        td { padding: 10px 5px; border-bottom: 1px solid #eee; text-align: center; position: relative; }
        
        /* ÊªæËº™ÈÅ∏ÂñÆÊ®£Âºè */
        .score-select {
            width: 55px;
            height: 40px;
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 1.1rem;
            background-color: #fff;
            appearance: none; /* ÁßªÈô§È†êË®≠ÁÆ≠È†≠Â¢ûÂä†ÁæéÊÑü */
            -webkit-appearance: none;
            padding-left: 12px;
            cursor: pointer;
        }

        .zebra-label { display: none; position: absolute; top: -2px; left: 50%; transform: translateX(-50%); background: var(--zebra); color: white; font-size: 0.6rem; padding: 1px 4px; border-radius: 4px; z-index: 10; }
        .is-zebra .zebra-label { display: block; }
        .is-zebra .score-select { border: 2px solid var(--zebra); background: #f0f0f0; }
        
        .status-cell { font-weight: bold; font-size: 0.9rem; }
        .valid { color: var(--valid); }
        .invalid { color: var(--invalid); background: #fff0f0; }

        .summary-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; width: 100%; max-width: 500px; margin-top: 20px; }
        .result-card { background: white; padding: 15px; border-radius: 12px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border-top: 4px solid var(--accent); }
        .total { font-size: 1.8rem; font-weight: bold; margin: 5px 0; color: var(--primary); }
        .bonus-info { font-size: 0.7rem; color: #888; margin-bottom: 5px; }
        .diff { font-size: 1.1rem; font-weight: bold; }
        .plus { color: var(--valid); }
        .minus { color: var(--invalid); }
        
        button.reset-btn { margin: 30px 0; padding: 12px 30px; background: var(--primary); color: white; border: none; border-radius: 25px; font-weight: bold; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
    </style>
</head>
<body>

    <h3 style="margin: 10px 0;">ü¶ì 10Â±ÄË®àÂàÜÁ≥ªÁµ± (4ÂÄçÊï∏ÊªæËº™)</h3>

    <div class="header">
        <input type="text" id="p1_n" value="Áé©ÂÆ∂ 1" oninput="update()">
        <input type="text" id="p2_n" value="Áé©ÂÆ∂ 2" oninput="update()">
        <input type="text" id="p3_n" value="Áé©ÂÆ∂ 3" oninput="update()">
        <input type="text" id="p4_n" value="Áé©ÂÆ∂ 4" oninput="update()">
    </div>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Â±Ä</th>
                    <th class="l1">P1</th><th class="l2">P2</th><th class="l3">P3</th><th class="l4">P4</th>
                    <th>Á∏ΩÂíå</th>
                </tr>
            </thead>
            <tbody id="gb"></tbody>
        </table>
    </div>

    <div class="summary-grid" id="res"></div>
    <button class="reset-btn" onclick="if(confirm('ÈáçÁΩÆÊâÄÊúâÂàÜÊï∏Ôºü')) location.reload()">Ê∏ÖÈô§ÊâÄÊúâË≥áÊñô</button>

<script>
    const gb = document.getElementById('gb');
    const options = [0, 4, 8, 12, 16, 20, 24, 28, 32];

    for (let i = 1; i <= 10; i++) {
        const tr = document.createElement('tr');
        let cellsHtml = `<td style="color:#888; font-size:0.8rem">${i}</td>`;
        
        for (let p = 1; p <= 4; p++) {
            let selectHtml = `<select class="r-${i} s${p} score-select" onchange="v(${i})">`;
            options.forEach(opt => {
                selectHtml += `<option value="${opt}">${opt}</option>`;
            });
            selectHtml += `</select>`;
            
            cellsHtml += `<td class="cell-${p}-r${i}"><span class="zebra-label">ÊñëÈ¶¨</span>${selectHtml}</td>`;
        }
        
        cellsHtml += `<td id="sum-${i}" class="status-cell invalid">0</td>`;
        tr.innerHTML = cellsHtml;
        gb.appendChild(tr);
    }

    function v(r) {
        let s = 0;
        for(let p=1; p<=4; p++) {
            const val = Number(document.querySelector(`.r-${r}.s${p}`).value) || 0;
            s += val;
            const cell = document.querySelector(`.cell-${p}-r${r}`);
            if(val === 32) cell.classList.add('is-zebra');
            else cell.classList.remove('is-zebra');
        }
        const c = document.getElementById(`sum-${r}`);
        c.innerText = s;
        c.className = 'status-cell ' + (s === 32 ? 'valid' : 'invalid');
        update();
    }

    function update() {
        const names = [document.getElementById('p1_n').value, document.getElementById('p2_n').value, document.getElementById('p3_n').value, document.getElementById('p4_n').value];
        names.forEach((n, i) => { document.querySelectorAll(`.l${i+1}`).forEach(el => el.innerText = n); });

        const totals = [0,0,0,0];
        const bonuses = [0,0,0,0];

        for(let i=1; i<=10; i++) {
            for(let p=1; p<=4; p++) {
                const val = Number(document.querySelector(`.r-${i}.s${p}`).value) || 0;
                totals[p-1] += val;
                if(val === 32) bonuses[p-1] += 10;
            }
        }

        const container = document.getElementById('res');
        container.innerHTML = totals.map((t, i) => {
            const finalScore = t + bonuses[i];
            const d = finalScore - 80;
            return `
                <div class="result-card">
                    <div style="font-size:0.8rem; color:#666">${names[i]}</div>
                    <div class="bonus-info">${bonuses[i] > 0 ? 'üéÅ ÊñëÈ¶¨ÁçéÂãµ +' + bonuses[i] : 'ÁÑ°Á¥ÖÂà©'}</div>
                    <div class="total">${finalScore}</div>
                    <div class="diff ${d>=0?'plus':'minus'}">${d>=0?'+'+d:d}</div>
                </div>
            `;
        }).join('');
    }
    update();
</script>
</body>
</html>
